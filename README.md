# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


В качестве парадгимы для реализации проекта была выбрана MVP - парадгима.
Исходя из нее, весь код поделен на три части: слой данных, слой представления и презентер, который связывает два предыдущих слоя между собой.

## Типы данных

### Данные товара

interface IWebLarekData {
    id: number;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number
  }

type IWebLarekItem = Pick<IWebLarekData, 'id' | 'title' | 'category' | 'price'>

type IWebLarekItemBasket = Pick<IWebLarekData, 'id' | 'title' | 'price'>

### Форма

interface IFormData {
  address: string
  payment: string
  emailAdress: string
  phoneNumber: string
}

type FormErrors = Partial<Record<keyof IFormData, string>>;

interface IForm {
  form: IFormData;
  formErrors: FormErrors
}

### Корзина

interface IBasket {
  items: Map<string, number>;
  add(id: string): void;
  remove(id: string): void
}

## Архитектура проекта

## base

### Класс Api
Класс отвечает за логику запросов на сервер.
Конструктор класса содержит базовый адрес сервера и объект с заголовками запроса.
Класс имеет такие методы:
• get - для выполнения GET запроса по указанному адресу, возращает ответ с сервера в виде объекта;
• post - для передачи указанных данных по указанному адресу.

### Класс Component
Класс отвечает за отображение компонентов.
Конструктор класса содержит контейнер с которым будут производится дальнейшие действия.
Класс имеет такие методы:
• toggleClass - для переключения класса переданного элемента;
• setText - для установки текстового содержимого переданному элементу;
• setDisabled - для изменения статуса блокировки переданного элемента;
• setHidden - для сокрытия переданного элемента;
• setVisible - для показа переданного элемента;
• setImage - для установки переданному элементу изображения с альтернативным текстом;
• render - для возвращения корневого DOM-элемента.

### Класс EventEmitter
Класс отвечает за работу связанную с событиями. Их создание, подписка на них.
Конструктор класса содержит событие, которое будет генирироваться при вызове.
Класс имеет такие методы:
• on - для установки обработчика на событие;
• off - для снятия обработчика с события;
• emit - для инициирования события с данными;
• onAll - для включения возможности слушать все события;
• ofAll - для сброса всех обработчиков;
• trigger - для создания коллбек триггера, генерирующего событие при вызове.

### Класс Model
Класс отвечает за работу с базовым кодом модели данных
Класс имеет метод:
• emitChanges - сообщает, что модель изменилась и вызывает событие.

## common

### Класс BasketComponent
Класс отвечает за отображение модального окна корзины с добавленными пользователем товарами.
Конструктор класса содержит контейнер, события, товары.
Класс имеет метод:
• set items - для занесения в корзину items`ов, где items - массив, в который добавляются товары пользователем. 

### BasketProductComponent
Класс отвечает за отображение добавленных пользователем товаров в открытом модальном окне корзины (BasketComponent).
Конструктор класса содежрит название и цену добавленного товара, индекс и кнопку HTML корзины, а также контейнер.
Класс имеет такие методы:
• set title - для установки названия товара;
• set price - для установки цены товара;
• set index - для установки индекса товара.

### Класс Form
Класс отвечает за действия производимые пользователем с формой, а также за данные полей, валидацию формы, ее отображение.
Конструктор класса содержит контейнер, события, кнопку сабмита, ошибки, которые будут вывоводится в случае отрицательной проверки на валидность полей, а также цель (конкретную форму), поля формы и их значения.
Класс имеет такие методы:
• onInputChange - для активации события после изменения содержимого полей формы;
• set vaild - для придания полю вводу валидности;
• set errors - для выведения ошибок при непрохождении поля формы валидации;
• render - для выведения на страницу формы.

### Класс FormPayment
Класс отвечает за первую форму в которую попадает пользователей после нажатия сабмита в форме подтверждения заказа.
Конструктор класса содержит радио кнопки с выбором способа оплаты, свою кнопку сабмита формы, поле инпут - наследуется от Form.
Класс имеет метод:
• set adress - для установки в инпут пользовательского значения.

### Класс FormContacts
Класс отвечает за форму, в которую пользователь попадает после подвтерждения способа оплата и введения своего адреса.
Конструктор класса содержит свою кнопку сабмита, два поля инпута - наследуется от Form.
Класс имеет такие методы:
• set phoneNumber - для установки в инпут пользовательского значения;
• set emailAdress - для установки в инпут пользовательского значения.

### Класс Modal
Класс отвечает за логику взаимодействия и отображения модальных окон.
Конструктор класса содержит контейнер, события, кнопки закрытия модальных окон и непосредственный контент, отображаемый в модальном окне.
Класс имеет такие методы:
• set content - для установки содержимого компонента;
• open - для добавления класса 'modal_active' и выведение модального окна на экран пользователя;
• close - для удаления класса 'modal_active' у переданного элемента и сокрытие его с экрана пользователя;
• render - для выведения модального окна посредством метода Component с добавлением метода open у Modal. 

### Класс Success
Класс отвечает отображение модального окна успешно сделанного заказа.
Конструктор класса содержит контейнер, действие и кнопку, позваоляющую закрыть модальное окно.
Класс имеет такие методы:
• set success - для заполнения поля успешно завершенной покупки.

## data

### Класс AppDataBasket
Класс отвечает за логику работы корзины на сайте. Дочерний класс классу Model.
Класс имеет такие методы:
• add - для добавления в корзину товара;
• remove - для того, чтобы убрать товар из корзины по клику;
• clearBasker - для очистки корзины;
• getTotal - для подсчета количества добавленных в корзину товаров;
• hasItem - для проверки наличия определенного (по id) товара в корзине.

### Класс AppDataForm
Класс отвечает за текущее состояние формы на сайте.
Класс содержит в себе все данные формы, а также, данные ошибок.
Класс имеет такие методы:
• setField - для установки состояния инпута;
• clearForm - для очистки полей формы;
• validateFormPayment - для валидации формы с выбором способа оплаты;
• validateFormContacts - для валидации формы с контактами пользователя.

### Класс AppDataProductsList
Класс отвечает за состояние товаров указанных на сайте.
Класс содержит массив из всех товаров.
Класс имеет такие методы:
• setProducts - для того, чтобы внести товары в общий список товаров на сайте;
• getProduct - для того, чтобы получить доступ к необходиму товару из массива.

### Класс Item
Класс отвечает за логику данных товара, их установку.
Конструктор класса содержит все данные, которые приходят с сервера о товаре (id, description, image и т.д.)
Класс имеет такие методы:
• set методы класса - для установки данных в HTML элементы на страницы;
• get методы класса - для получения данных и последующую их обработку как HTML элементов.

### Класс Page
Класс отвечает за отображение страницы на экране пользователя.
Класс наследует класс Component. Конструктор класса содержит контейнер и все HTML элементы относящие к корзине покупок на сайте.
Класс имеет такие методы:
• set counter - для отображения количества товаров добавленных в корзину; 
• set catalog - для отображения перечня возмжных к покупке позиций;
• set locked - для контроля состояния страницы при открытых модальных окнах;

### Класс WebShopApi
Класс отвечает за действия с API и является дочерним классу Api.
Конструктор класса содержит строку cdn.
Класс имеет методы:
• getProduct - для получения товара с сервера;
• getProductsList - для получения всего списка товаров с сервера;
• postUserOrder - для отправки запроса пользователя на покупу выбранных товаров.